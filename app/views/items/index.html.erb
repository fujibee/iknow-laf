<div class="menu">
  <%= link_to 'アイテム一覧', :action => :index %> |
  <%= link_to 'ゲームへ戻る', :controller => :game %>
</div>

<%= render :partial => 'todo' %>

<% form_tag :action => 'search' do -%>
  <%= text_field_tag :spell %>
  <%= submit_tag '検索' %>
<% end -%>
<div>
    <%= link_to 'アイテムリセット', {:action => 'destroy_all'}, :method => :delete %> 
    |
    <%= link_to 'ランキングリセット', {:controller => 'game', :action => 'destroy_all'}, :method => :delete %><br/>
  <% if @items.size > 0 -%>
    <%= will_paginate(@items) %>
    <table>
      <tr>
        <th>spell</th>
        <th>meaning</th>
        <th>kana</th>
        <th>iKnow! ID</th>
        <th></th>
    <% @items.each do |@item| -%>
      <tr>
        <td><%= @item.spell %></td>
        <td><%= @item.meaning %></td>
        <% form_for :item do |f| -%> 
          <td>
            <%= f.text_field :kana, :id => "kana_#{@item.id}",
              :tabindex => @items.index(@item) + 1 %>
          </td>
          <%= observe_field "kana_#{@item.id}", :url => {:action => :update},
                            :on => :blur, :with => "'id=#{@item.id}&kana='+value" -%>
        <% end -%>
        <td><%= link_to @item.iknow_id, "http://api.iknow.co.jp/items/#{@item.iknow_id}?include_sentences=true" %></td>
        <td><%= link_to 'x', {:action => :destroy, :id => @item}, :method => :delete, :confirm => "#{@item.display_name}を削除しますか？" %></td>
      </tr>
    <% end -%>
    </table>
    <%= will_paginate(@items) %>
  <% else -%>
    １件もありません。
  <% end -%>
</div>
